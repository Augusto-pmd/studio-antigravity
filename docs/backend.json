
{
  "entities": {
    "UserProfile": {
      "title": "User Profile",
      "type": "object",
      "description": "Represents a user of the PMD Manager application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the UserProfile entity, matches Firebase Auth UID."
        },
        "role": {
          "type": "string",
          "description": "The role of the user (Direction, Supervisor, Administration, Operator)."
        },
        "email": {
          "type": "string",
          "description": "The email address of the user.",
          "format": "email"
        },
        "fullName": {
          "type": "string",
          "description": "The full name of the user."
        }
      },
      "required": ["id", "role", "email", "fullName"]
    },
    "Employee": {
      "title": "Employee",
      "type": "object",
      "description": "Represents a worker in a project. Can be a direct employee or a contractor.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Employee."
        },
        "name": {
          "type": "string",
          "description": "Full name of the employee."
        },
        "status": {
          "type": "string",
          "description": "The current status of the employee.",
          "enum": ["Activo", "Inactivo"]
        },
        "paymentType": {
          "type": "string",
          "description": "The payment frequency for the employee.",
          "enum": ["Diario", "Semanal"]
        },
        "category": {
          "type": "string",
          "description": "The employee's trade or category (e.g., 'Albañil', 'Electricista')."
        },
        "dailyWage": {
          "type": "number",
          "description": "The daily wage for the employee."
        },
        "artExpiryDate": {
          "type": "string",
          "description": "The expiration date of the employee's ART (Aseguradora de Riesgos del Trabajo).",
          "format": "date-time"
        }
      },
      "required": ["id", "name", "status", "paymentType", "category", "dailyWage"]
    },
    "AttendanceRecord": {
      "title": "Attendance Record",
      "type": "object",
      "description": "A single daily attendance record for an employee.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the attendance record."
        },
        "employeeId": {
          "type": "string",
          "description": "Reference to the Employee."
        },
        "projectId": {
          "type": "string",
          "description": "Reference to the Project."
        },
        "date": {
          "type": "string",
          "description": "The date of the attendance record.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "The attendance status.",
          "enum": ["presente", "ausente"]
        },
        "lateHours": {
          "type": "number",
          "description": "Number of hours the employee was late."
        },
        "notes": {
          "type": "string",
          "description": "Additional notes or observations."
        }
      },
      "required": ["id", "employeeId", "projectId", "date", "status"]
    },
    "CashAdvance": {
      "title": "Cash Advance",
      "type": "object",
      "description": "A cash advance given to an employee.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the cash advance."
        },
        "employeeId": {
          "type": "string",
          "description": "Reference to the Employee receiving the advance."
        },
        "projectId": {
          "type": "string",
          "description": "Reference to the Project related to the advance."
        },
        "date": {
          "type": "string",
          "description": "The date the advance was given.",
          "format": "date-time"
        },
        "amount": {
          "type": "number",
          "description": "The amount of the cash advance."
        },
        "reason": {
          "type": "string",
          "description": "The reason for the advance."
        }
      },
      "required": ["id", "employeeId", "projectId", "date", "amount"]
    },
    "Project": {
      "title": "Project",
      "type": "object",
      "description": "Represents a construction project managed within the system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Project entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the project."
        },
        "client": {
          "type": "string",
          "description": "The client for whom the project is being built."
        },
        "address": {
          "type": "string",
          "description": "The full address of the project location."
        },
        "currency": {
          "type": "string",
          "description": "The currency for the project budget.",
          "enum": ["ARS", "USD"]
        },
        "projectType": {
          "type": "string",
          "description": "The type of construction project (e.g., Residential, Commercial)."
        },
        "status": {
          "type": "string",
          "description": "The current status of the project.",
          "enum": ["En Curso", "Pausado", "Completado", "Cancelado"]
        },
        "startDate": {
          "type": "string",
          "description": "The start date of the project.",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "description": "The planned end date of the project."
        },
        "supervisor": {
          "type": "string",
          "description": "The person responsible for supervising the project."
        },
        "budget": {
          "type": "number",
          "description": "The total budget allocated for the project."
        }
      },
      "required": ["id", "name", "client", "address", "status", "startDate", "supervisor", "budget"]
    },
    "UserCash": {
      "title": "UserCash",
      "type": "object",
      "description": "Represents a user's cash account for managing expenses.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the UserCash entity."
        },
        "userProfileId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:1 UserCash)"
        },
        "currency": {
          "type": "string",
          "description": "The currency of the cash account (ARS or USD)."
        },
        "balance": {
          "type": "number",
          "description": "The current balance of the cash account."
        },
        "lastClosureDate": {
          "type": "string",
          "description": "The date of the last weekly closure.",
          "format": "date-time"
        }
      },
      "required": ["id", "userProfileId", "currency", "balance", "lastClosureDate"]
    },
    "Expense": {
      "title": "Expense",
      "type": "object",
      "description": "Represents an expense record.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Expense entity."
        },
        "projectId": {
          "type": "string",
          "description": "Reference to Project. (Relationship: Project 1:N Expense)"
        },
        "date": {
          "type": "string",
          "description": "The date the expense was incurred.",
          "format": "date-time"
        },
        "supplierId": {
          "type": "string",
          "description": "Reference to Supplier. (Relationship: Supplier 1:N Expense)"
        },
        "categoryId": {
          "type": "string",
          "description": "Reference to Category. (Relationship: Category 1:N Expense)"
        },
        "documentType": {
          "type": "string",
          "description": "The type of document backing the expense.",
          "enum": ["Factura", "Recibo Común"]
        },
        "invoiceNumber": {
          "type": "string",
          "description": "The official number of the invoice, if applicable."
        },
        "amount": {
          "type": "number",
          "description": "The total amount of the expense, including taxes."
        },
        "iva": {
          "type": "number",
          "description": "The VAT (IVA) amount included in the total expense amount."
        },
        "iibb": {
            "type": "number",
            "description": "The Gross Income tax perception (Percepción de IIBB)."
        },
        "currency": {
          "type": "string",
          "description": "The currency for the expense.",
          "enum": ["ARS", "USD"]
        },
        "exchangeRate": {
          "type": "number",
          "description": "The reference daily exchange rate (e.g., Dólar BNA compra) at the time of the transaction, for bimonetary control."
        },
        "receiptUrl": {
          "type": "string",
          "description": "URL of the receipt image or document, if applicable.",
          "format": "uri"
        }
      },
      "required": ["id", "projectId", "date", "supplierId", "categoryId", "amount", "currency", "exchangeRate", "documentType"]
    },
    "Supplier": {
      "title": "Supplier",
      "type": "object",
      "description": "Represents a supplier or vendor (contratista).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Supplier entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the supplier."
        },
        "insuranceExpiryDate": {
          "type": "string",
          "description": "The expiration date of the supplier's insurance.",
          "format": "date-time"
        },
        "artExpiryDate": {
          "type": "string",
          "description": "The expiration date of the supplier's ART (Aseguradora de Riesgos del Trabajo).",
          "format": "date-time"
        }
      },
      "required": ["id", "name"]
    },
    "Category": {
      "title": "Category",
      "type": "object",
      "description": "Represents a category for classifying expenses.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Category entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the expense category."
        },
        "description": {
          "type": "string",
          "description": "A description of the expense category."
        }
      },
      "required": ["id", "name"]
    },
    "Contract": {
      "title": "Contract",
      "type": "object",
      "description": "Represents a contract associated with a project.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Contract entity."
        },
        "projectId": {
          "type": "string",
          "description": "Reference to Project. (Relationship: Project 1:N Contract)"
        },
        "amount": {
          "type": "number",
          "description": "The total amount of the contract."
        },
        "balance": {
          "type": "number",
          "description": "The remaining balance of the contract."
        }
      },
      "required": ["id", "projectId", "amount", "balance"]
    },
    "FundRequest": {
      "title": "Fund Request",
      "type": "object",
      "description": "A request for funds to be included in the weekly payment sheet (e.g., for materials, logistics, cash).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique ID for the fund request."
        },
        "requesterId": {
          "type": "string",
          "description": "ID of the user making the request."
        },
        "requesterName": {
          "type": "string",
          "description": "Name of the user making the request."
        },
        "amount": {
          "type": "number",
          "description": "Amount requested."
        },
        "currency": {
          "type": "string",
          "description": "Currency of the request.",
          "enum": [
            "ARS",
            "USD"
          ]
        },
        "exchangeRate": {
          "type": "number",
          "description": "The reference daily exchange rate (e.g., Dólar BNA compra) at the time of the request, for bimonetary control."
        },
        "category": {
          "type": "string",
          "description": "Category of the request (e.g., Logística, Materiales, Viáticos)."
        },
        "projectId": {
          "type": "string",
          "description": "Optional project to associate the request with."
        },
        "status": {
          "type": "string",
          "description": "Status of the request.",
          "enum": [
            "Pendiente",
            "Aprobado",
            "Rechazado",
            "Pagado"
          ]
        },
        "date": {
          "type": "string",
          "description": "Date of the request.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "requesterId",
        "requesterName",
        "amount",
        "currency",
        "category",
        "status",
        "date",
        "exchangeRate"
      ]
    },
    "TaskRequest": {
      "title": "Task Request",
      "type": "object",
      "description": "Represents a task or request from one user to another.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the TaskRequest."
        },
        "title": {
          "type": "string",
          "description": "A short, descriptive title for the task."
        },
        "description": {
          "type": "string",
          "description": "Detailed description of the task or request."
        },
        "requesterId": {
          "type": "string",
          "description": "The ID of the user who created the task."
        },
        "requesterName": {
          "type": "string",
          "description": "The name of the user who created the task."
        },
        "assigneeId": {
          "type": "string",
          "description": "The ID of the user assigned to the task."
        },
        "assigneeName": {
          "type": "string",
          "description": "The name of the user assigned to the task."
        },
        "status": {
          "type": "string",
          "description": "The current status of the task.",
          "enum": [
            "Pendiente",
            "Finalizado"
          ]
        },
        "createdAt": {
          "type": "string",
          "description": "The date and time the task was created.",
          "format": "date-time"
        },
        "completedAt": {
          "type": "string",
          "description": "The date and time the task was completed.",
          "format": "date-time"
        },
        "projectId": {
          "type": "string",
          "description": "Optional ID of a project related to the task."
        }
      },
      "required": [
        "id",
        "title",
        "requesterId",
        "requesterName",
        "assigneeId",
        "assigneeName",
        "status",
        "createdAt"
      ]
    }
  },
  "auth": {
    "providers": ["password", "anonymous"]
  },
  "firestore": {
    "/user-profiles/{userProfileId}": {
      "schema": { "$ref": "#/entities/UserProfile" },
      "description": "Stores user profile data. Access is restricted to the user themselves."
    },
    "/projects/{projectId}": {
      "schema": { "$ref": "#/entities/Project" },
      "description": "Stores project details. Writable only by authorized users (e.g., admins or project managers)."
    },
    "/user-profiles/{userProfileId}/cash/{cashId}": {
      "schema": { "$ref": "#/entities/UserCash" },
      "description": "Stores a user's cash balance. Only accessible by the user."
    },
    "/projects/{projectId}/expenses/{expenseId}": {
      "schema": { "$ref": "#/entities/Expense" },
      "description": "Stores expenses related to a specific project."
    },
    "/suppliers/{supplierId}": {
      "schema": { "$ref": "#/entities/Supplier" },
      "description": "Master list of suppliers/contractors."
    },
    "/categories/{categoryId}": {
      "schema": { "$ref": "#/entities/Category" },
      "description": "Master list of expense categories."
    },
    "/projects/{projectId}/contracts/{contractId}": {
      "schema": { "$ref": "#/entities/Contract" },
      "description": "Stores contracts related to a specific project."
    },
    "/employees/{employeeId}": {
      "schema": { "$ref": "#/entities/Employee" },
      "description": "Master list of all employees and individual contractors."
    },
    "/attendances/{attendanceId}": {
      "schema": { "$ref": "#/entities/AttendanceRecord" },
      "description": "Stores individual daily attendance records."
    },
    "/cash-advances/{cashAdvanceId}": {
      "schema": { "$ref": "#/entities/CashAdvance" },
      "description": "Stores individual cash advance records."
    },
    "/fund-requests/{fundRequestId}": {
      "schema": {
        "$ref": "#/entities/FundRequest"
      },
      "description": "Stores all fund requests for weekly payment sheets."
    },
    "/task-requests/{taskRequestId}": {
      "schema": {
        "$ref": "#/entities/TaskRequest"
      },
      "description": "Stores all user-to-user tasks and requests."
    }
  }
}

    