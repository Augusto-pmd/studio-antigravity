{
  "entities": {
    "User": {
      "title": "User",
      "type": "object",
      "description": "Represents a user in the PMD Manager system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "role": {
          "type": "string",
          "description": "The role of the user (Direction, Supervisor, Administration, Operator)."
        },
        "email": {
          "type": "string",
          "description": "The email address of the user.",
          "format": "email"
        },
        "fullName": {
          "type": "string",
          "description": "The full name of the user."
        }
      },
      "required": ["id", "role", "email", "fullName"]
    },
    "Project": {
      "title": "Project",
      "type": "object",
      "description": "Represents a construction project managed within the system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Project entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the project."
        },
        "description": {
          "type": "string",
          "description": "A brief description of the project."
        },
        "startDate": {
          "type": "string",
          "description": "The start date of the project.",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "description": "The planned end date of the project.",
          "format": "date-time"
        }
      },
      "required": ["id", "name", "description", "startDate", "endDate"]
    },
    "UserCash": {
      "title": "UserCash",
      "type": "object",
      "description": "Represents a user's cash account for managing expenses.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the UserCash entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:1 UserCash)"
        },
        "currency": {
          "type": "string",
          "description": "The currency of the cash account (ARS or USD)."
        },
        "balance": {
          "type": "number",
          "description": "The current balance of the cash account."
        },
        "lastClosureDate": {
          "type": "string",
          "description": "The date of the last weekly closure.",
          "format": "date-time"
        }
      },
      "required": ["id", "userId", "currency", "balance", "lastClosureDate"]
    },
    "Expense": {
      "title": "Expense",
      "type": "object",
      "description": "Represents an expense record.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Expense entity."
        },
        "projectId": {
          "type": "string",
          "description": "Reference to Project. (Relationship: Project 1:N Expense)"
        },
        "date": {
          "type": "string",
          "description": "The date the expense was incurred.",
          "format": "date-time"
        },
        "supplierId": {
          "type": "string",
          "description": "Reference to Supplier. (Relationship: Supplier 1:N Expense)"
        },
        "categoryId": {
          "type": "string",
          "description": "Reference to Category. (Relationship: Category 1:N Expense)"
        },
        "amount": {
          "type": "number",
          "description": "The amount of the expense."
        },
        "receiptUrl": {
          "type": "string",
          "description": "URL of the receipt image or document.",
          "format": "uri"
        }
      },
      "required": ["id", "projectId", "date", "supplierId", "categoryId", "amount"]
    },
    "Supplier": {
      "title": "Supplier",
      "type": "object",
      "description": "Represents a supplier or vendor.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Supplier entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the supplier."
        },
        "insuranceExpiryDate": {
          "type": "string",
          "description": "The expiration date of the supplier's insurance.",
          "format": "date-time"
        },
        "artExpiryDate": {
          "type": "string",
          "description": "The expiration date of the supplier's ART (Aseguradora de Riesgos del Trabajo).",
          "format": "date-time"
        }
      },
      "required": ["id", "name"]
    },
    "Category": {
      "title": "Category",
      "type": "object",
      "description": "Represents a category for classifying expenses.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Category entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the expense category."
        },
        "description": {
          "type": "string",
          "description": "A description of the expense category."
        }
      },
      "required": ["id", "name"]
    },
    "Contract": {
      "title": "Contract",
      "type": "object",
      "description": "Represents a contract associated with a project.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Contract entity."
        },
        "projectId": {
          "type": "string",
          "description": "Reference to Project. (Relationship: Project 1:N Contract)"
        },
        "amount": {
          "type": "number",
          "description": "The total amount of the contract."
        },
        "balance": {
          "type": "number",
          "description": "The remaining balance of the contract."
        }
      },
      "required": ["id", "projectId", "amount", "balance"]
    }
  },
  "auth": {
    "providers": ["password", "anonymous"]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/User" },
      "description": "Stores user profile data. Access is restricted to the user themselves."
    },
    "/projects/{projectId}": {
      "schema": { "$ref": "#/entities/Project" },
      "description": "Stores project details. Writable only by authorized users (e.g., admins or project managers)."
    },
    "/users/{userId}/cash/{cashId}": {
      "schema": { "$ref": "#/entities/UserCash" },
      "description": "Stores a user's cash balance. Only accessible by the user."
    },
    "/projects/{projectId}/expenses/{expenseId}": {
      "schema": { "$ref": "#/entities/Expense" },
      "description": "Stores expenses related to a specific project."
    },
    "/suppliers/{supplierId}": {
      "schema": { "$ref": "#/entities/Supplier" },
      "description": "Master list of suppliers."
    },
    "/categories/{categoryId}": {
      "schema": { "$ref": "#/entities/Category" },
      "description": "Master list of expense categories."
    },
    "/projects/{projectId}/contracts/{contractId}": {
      "schema": { "$ref": "#/entities/Contract" },
      "description": "Stores contracts related to a specific project."
    }
  }
}
